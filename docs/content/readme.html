
<html><head></head><body><h2 id="shoukaku">Shoukaku</h2>
<hr />
<p align="center">
  <img src="https://vignette.wikia.nocookie.net/kancolle/images/c/c8/Shoukaku_Full.png/revision/latest" style="max-width: 100%;">
</p>

<p><a href="https://discordapp.com/invite/FVqbtGu"><img src="https://img.shields.io/discord/423116740810244097?style=for-the-badge" alt="Discord" style="max-width: 100%;"></a>
<a href="https://www.npmjs.com/package/shoukaku"><img src="https://img.shields.io/npm/v/shoukaku?style=for-the-badge" alt="npm" style="max-width: 100%;"></a>
<img src="https://img.shields.io/github/issues-raw/Deivu/Shoukaku?style=for-the-badge" alt="GitHub issues" style="max-width: 100%;">
<img src="https://img.shields.io/snyk/vulnerabilities/npm/shoukaku?style=for-the-badge" alt="Snyk Vulnerabilities for npm package" style="max-width: 100%;"> 
<img src="https://img.shields.io/npm/l/shoukaku?style=for-the-badge" alt="NPM" style="max-width: 100%;"></p>
<p>The ShipGirl Project. Shoukaku <code>(c) Kancolle for Shoukaku</code></p>
<h3 id="a-full-blown-lavalink-wrapper-designed-around-discordjs-v12">A Full Blown Lavalink Wrapper designed around Discord.js v12</h3>
<p>‚úÖ Currently being used by: </p>
<p><a href="https://discordbots.org/bot/424137718961012737"><img src="https://discordbots.org/api/widget/424137718961012737.svg" alt="DBL" style="max-width: 100%;"></a></p>
<h3 id="why-shoukaku-">Why Shoukaku?</h3>
<p>‚úÖ Straightforward </p>
<p>‚úÖ Scalable</p>
<p>‚úÖ Reliable</p>
<p>‚úÖ Maintained</p>
<p>‚úÖ Very Cute and Charming Shipgirl ‚ù§</p>
<p>‚úÖ And will make your library weeb üòÇ</p>
<h3 id="documentation">Documentation</h3>
<p><a href="https://deivu.github.io/Shoukaku/?api">https://deivu.github.io/Shoukaku/?api</a></p>
<h3 id="installation">Installation</h3>
<p>For Stable</p>
<pre><code>npm i shoukaku</code></pre><p>For Master</p>
<pre><code>npm i Deivu/Shoukaku</code></pre><h3 id="02x----10x-migration">0.2.x -&gt; 1.0.x Migration</h3>
<blockquote>
<p>0.2.x and earlier</p>
<pre><code class="js">&lt;Shoukaku&gt;.build({ /* buildOptions here */ });</code></pre>
</blockquote>
<blockquote>
<p>1.0.0 and newer</p>
<pre><code class="js">&lt;Shoukaku&gt;.start({ /* buildOptions here */ });</code></pre>
</blockquote>
<h3 id="01x----02x-migration">0.1.x -&gt; 0.2.x Migration</h3>
<blockquote>
<p>ShoukakuLink is now a property of ShoukakuPlayer, meaning all link related getters are changed to player getters.</p>
</blockquote>
<blockquote>
<p>You can access ShoukakuLink via .voiceConnection property of ShoukakuPlayer</p>
</blockquote>
<blockquote>
<p>ShoukakuPlayer events are "GREATLY CHANGED". Those marked as optional can be left out.
The events is as follows</p>
<ul>
<li>end</li>
<li>closed</li>
<li>error</li>
<li>nodeDisconnect</li>
<li>trackException "optional"</li>
<li>resumed "optional"</li>
<li>playerUpdate "optional"</li>
</ul>
</blockquote>
<blockquote>
<p>Shoukaku class have renamed methods and properties</p>
<ul>
<li>getLink() -&gt; getPlayer()</li>
<li>.links -&gt; .players</li>
<li>.totalLinks -&gt; .totalPlayers</li>
</ul>
</blockquote>
<blockquote>
<p>ShoukakuSocket also have a renamed property</p>
<ul>
<li>.links -&gt; .players</li>
</ul>
</blockquote>
<blockquote>
<p>You don't disconnect / clean the player on ShoukakuLink but on ShoukakuPlayer now making your code more clean and better</p>
</blockquote>
<blockquote>
<p>0.1.1 and earlier</p>
<pre><code class="js">&lt;ShoukakuLink&gt;.player.playTrack();
&lt;ShoukakuLink&gt;.disconnect();</code></pre>
</blockquote>
<blockquote>
<p>0.2.x and newer</p>
<pre><code class="js">&lt;ShoukakuPlayer&gt;.playTrack();
&lt;ShoukakuPlayer&gt;.disconnect();</code></pre>
</blockquote>
<p>You can see more of the changes on updated example below.</p>
<h3 id="support-server">Support Server</h3>
<p>If you need help on using this, Join Here <a href="https://discordapp.com/invite/FVqbtGu">ShipGirls Community</a> and <code>ask at #support</code>. </p>
<h3 id="issue---bug-found-">Issue / Bug Found?</h3>
<p>Feel free to open an issue in the <a href="https://github.com/Deivu/Shoukaku/issues">Issues</a> section of this repository.</p>
<h3 id="notes">Notes</h3>
<blockquote>
<p>If you want to help in development, you can use the wrapper and report the issues you experienced on using it, or Submit a PR if you think you can improve something.</p>
</blockquote>
<blockquote>
<p>There is a Discord.JS actual implementation and a simple implementation examples below.</p>
</blockquote>
<h3 id="starting-a-lavalink-server">Starting a Lavalink Server.</h3>
<p><a href="https://github.com/Frederikam/Lavalink/blob/master/README.md">View Lavalink README here</a></p>
<h3 id="discordjs-actual-implementation">Discord.js actual implementation.</h3>
<p><a href="https://github.com/Deivu/Kongou">View Kongou's source code here</a></p>
<h3 id="more-simple-implementation-w-o-queue">More simple implementation w/o queue.</h3>
<pre><code class="js">const { Client } = require('discord.js');
const { Shoukaku } = require('shoukaku');
const MyLavalinkServer = [
  {
    name: 'my_lavalink_server',
    host: 'localhost',
    port: 6969,
    auth: 'owo_your_password'
  }
];
const client = new Client();

// In this example, I will assign Shoukaku to a carrier variable. Options are the default options if nothing is specified
const Carrier = new Shoukaku(client, {
  resumable: false,
  resumableTimeout: 30,
  reconnectTries: 2,
  restTimeout: 10000 
});

// Listeners you can use for Shoukaku
Carrier.on('ready', (name) =&gt; console.log(`Lavalink Node: ${name} is now connected`));
// Error must be handled
Carrier.on('error', (name, error) =&gt; console.log(`Lavalink Node: ${name} emitted an error.`, error));
// Close emits when a lavalink node disconnects.
Carrier.on('close', (name, code, reason) =&gt; console.log(`Lavalink Node: ${name} closed with code ${code}. Reason: ${reason || 'No reason'}`));
// Disconnected emits when a lavalink node disconnected and will not try to reconnect again.
Carrier.on('disconnected', (name, reason) =&gt; console.log(`Lavalink Node: ${name} disconnected. Reason: ${reason || 'No reason'}`));

client.on('ready', () =&gt; {
  // You need to build shoukaku on your client's ready event for her to work like how its done in this example.
  Carrier.start(MyLavalinkServer, { id: client.user.id  });
  console.log('Bot Initialized');
})

// Now I will show you how to make a simple handler that plays a link on your chnanel. Async Await style
client.on('message', async (msg) =&gt; {
  if (msg.author.bot || !msg.guild) return;
  if (msg.content.startsWith('$play')) {

    // Check if there is already a link on your guild. Since this is a no queue implementation.
    if (Carrier.getPlayer(msg.guild.id)) return;

    const args = msg.content.split(' ');
    if (!args[1]) return;

    // Getting a node where we can peform our queries and connections.
    const node = Carrier.getNode();

    // Fetching the Lavalink Track Data from the node we got.
    let data = await node.rest.resolve(args[1]);

    // If there is no data lets just return
    if (!data) return;

    if (Array.isArray(data)) data = data[0];

    // Getting the ShoukakuPlayer where we can play tracks and disconnect once we dont need it anymore.
    const player = await node.joinVoiceChannel({
      guildID: msg.guild.id,
      voiceChannelID: msg.member.voice.channelID
    });

    // Example of handling the non optional events.
    const endFunction = (param) =&gt; {
        console.log(param);
        player.disconnect();
    }
    player.on('end', endFunction);
    player.on('closed', endFunction);
    player.on('error', endFunction);
    player.on('nodeDisconnect', endFunction);

    // Play the lavalink track we got
    await player.playTrack(data.track);
    await msg.channel.send("Now Playing: " + data.info.title);
  }
})
client.login('token');</code></pre>
</body></html>